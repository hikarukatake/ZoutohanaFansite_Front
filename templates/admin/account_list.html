<!-- 【利用者一覧】 -->
<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>利用者一覧</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"/>
    <link rel="stylesheet" href="../../static/css/admin/admin-style.css" th:href="@{/css/admin/admin-style.css}">
</head>
<body>
<div th:replace="~{layout-admin :: header}"></div>

<main id="admin-main">
    <h1 class="page-title">利用者一覧<span class="page-title-count">(<span th:text="${users.size()}">0</span>件)</span></h1>

    <div class="main-content">
        <div class="flex justify-between mt-2"> <!-- テーブルの上のメニュー部分 -->
            <div class="flex gap-1"> <!-- メニュー左部分(並び替え) -->
                <form method="GET" th:action="@{/admin/account/list}">
                    <input type="hidden" name="keyword" th:value="${keyword}">
                    <select name="sort" class="select" onchange="this.form.submit()">
                        <option value="created_desc" th:selected="${sort == 'created_desc'}">登録日時(新→旧)</option>
                        <option value="created_asc"  th:selected="${sort == 'created_asc'}">登録日時(旧→新)</option>
                        <option value="birthYear_desc" th:selected="${sort == 'birthYear_desc'}">生年(今→昔)</option>
                        <option value="birthYear_asc" th:selected="${sort == 'birthYear_asc'}">生年(昔→今)</option>
                        <option value="reviewCount_desc" th:selected="${sort == 'reviewCount_desc'}">書評数(多→少)</option>
                        <option value="reviewCount_asc" th:selected="${sort == 'reviewCount_asc'}">書評数(少→多)</option>
                    </select>
                </form>
                順
            </div>
            <div class="flex gap-1"> <!-- メニュー右部分(絞り込み・検索) -->
                <button type="button" class="btn" data-modal-target="filter-option-modal">絞り込みオプション</button>
                <form method="GET" th:action="@{/admin/account/list}" class="flex gap-1">
                    <input type="hidden" name="sort" th:value="${sort}">
                    <input type="text" name="keyword" class="input-text" placeholder="検索" th:value="${keyword}">
                    <button type="submit" class="btn"><span class="material-symbols-outlined scale-bigger">search</span></button>
                </form>
            </div>
        </div>

        <table class="list-table mt-4">
            <tr>
                <th class="table-border-r">ステータス</th>
                <th>ログインID</th>
                <th class="table-border-r">ニックネーム</th>
                <th>性別</th>
                <th>生年(年齢)</th>
                <th>居住地</th>
                <th>登録日時</th>
                <th>書評数</th>
                <th></th>
            </tr>
            <tr class="table-content-tr" th:each="user : ${users}">
                <td class="table-border-r text-center">
                    <span th:if="${user.status.label == '有効'}" class="status-green">
                        <span class="material-symbols-outlined">check_circle</span>有効
                    </span>
                    <span th:if="${user.status.label == '停止'}" class="status-red">
                        <span class="material-symbols-outlined">pause_circle</span>停止
                    </span>
                    <span th:if="${user.status.label == '無効'}" class="status-gray">
                        <span class="material-symbols-outlined">block</span>無効
                    </span>
                </td>
                <td th:text="${user.loginId}">-----</td>
                <td th:text="${user.nickname}" class="table-border-r">-----</td>
                <td th:text="${user.gender.label}" class="text-center">-----</td>
                <td th:text="${user.birthYear}" class="text-center">
                    <span th:text="${user.birthYear}">0000</span>年
                    (<span th:text="${user.age}">0</span>歳)
                </td>
                <td th:text="${user.address}" class="text-center">-----県-----市</td>
                <td th:text="${#temporals.format(user.createdAt, 'yyyy/MM/dd HH:mm')}" class="text-center">0000/00/00 00:00</td>
                <td th:text="${user.reviewCount}" class="text-center">0</td>
                <td class="text-center">
                    <a href="account_view.html" th:href="@{/admin/account/view(loginId=${user.loginId})}" class="table-row-link">
                        <span class="material-symbols-outlined">keyboard_double_arrow_right</span>
                    </a>
                </td>
            </tr>
        </table>

        <div class="pagination" id="pagination"></div>
    </div>
</main>

<div id="filter-option-modal" class="modal">
    <div>
        <div class="modal-content">
            <div class="flex justify-between items-start">
                <h2 class="page-title-sub">絞り込みオプション</h2>
                <span class="modal-close"><span class="material-symbols-outlined">close</span></span>
            </div>

            <form>
                <ul class="modal-option-wrap mt-4 ml-4">
                    <li>
                        <label><input type="checkbox" class="modal-checkbox-parent">ステータス</label>
                        <ul class="modal-checkbox-child grid-5">
                            <li><label><input type="checkbox">有効</label></li>
                            <li><label><input type="checkbox">停止</label></li>
                            <li><label><input type="checkbox">無効</label></li>
                        </ul>
                    </li>
                    <li>
                        <label><input type="checkbox" class="modal-checkbox-parent">性別</label>
                        <ul class="modal-checkbox-child grid-5">
                            <li><label><input type="checkbox">男</label></li>
                            <li><label><input type="checkbox">女</label></li>
                            <li><label><input type="checkbox">選択しない</label></li>
                        </ul>
                    </li>
                    <li>
                        <label><input type="checkbox" class="modal-checkbox-parent">年代</label>
                        <ul class="modal-checkbox-child grid-5">
                            <li><label><input type="checkbox">~9歳</label></li>
                            <li><label><input type="checkbox">10代</label></li>
                            <li><label><input type="checkbox">20代</label></li>
                            <li><label><input type="checkbox">30代</label></li>
                            <li><label><input type="checkbox">40代</label></li>
                            <li><label><input type="checkbox">50代</label></li>
                            <li><label><input type="checkbox">60代</label></li>
                            <li><label><input type="checkbox">70代</label></li>
                            <li><label><input type="checkbox">80代</label></li>
                            <li><label><input type="checkbox">90歳~</label></li>
                        </ul>
                    </li>
                    <li>
                        <label><input type="checkbox" class="modal-checkbox-parent">居住地</label>
                        <ul class="modal-checkbox-child">
                            <li><label><input type="checkbox">岩手県</label></li>
                            <li>
                                <label><input type="checkbox" class="modal-checkbox-parent">東北(岩手県以外)</label>
                                <ul class="modal-checkbox-child grid-5">
                                    <li><label><input type="checkbox">青森県</label></li>
                                    <li><label><input type="checkbox">宮城県</label></li>
                                    <li><label><input type="checkbox">秋田県</label></li>
                                    <li><label><input type="checkbox">山形県</label></li>
                                    <li><label><input type="checkbox">福島県</label></li>
                                </ul>
                            </li>
                            <li><label><input type="checkbox">東北以外</label></li>
                        </ul>
                    </li>
                </ul>

                <div class="btn-wrap mt-8">
                    <button type="submit" class="btn"><span class="px-8">絞り込む</span></button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="../../static/js/admin/admin-general.js" th:src="@{/js/admin/admin-general.js}"></script>
</body>
</html>
